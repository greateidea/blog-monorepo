import { getSafeHtmlFromDelta } from "../../utils"

const TestDeltaString = {"ops":[{"attributes":{"bold":true},"insert":"React x Svelte"},{"insert":" è·¨ç•Œè”åŠ¨åˆæ¥å•¦ï¼ç»è¿‡å‰ä¸¤ç¯‡æ–‡ç« "},{"attributes":{"link":"https://blog.hiout.top/dollar-state"},"insert":"ã€ŠSvelteçš„$stateåœ¨Reactä¸­çš„åŸºç¡€å®ç°ã€‹"},{"attributes":{"link":"https://blog.hiou.top/dollar-effect"},"insert":"ã€ŠSvelteçš„$effectåœ¨Reactä¸­çš„åŸºç¡€å®ç°ã€‹"},{"insert":"çš„é“ºå«ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥å¾ˆç†Ÿæ‚‰ "},{"attributes":{"bold":true},"insert":"svelte"},{"insert":" çš„æ€è·¯å’Œæ¶æ„äº†ï¼Œå®ƒä»¥å“åº”å¼ç³»ç»Ÿä¸ºæ ¸å¿ƒï¼Œä»¥ "},{"insert":{"blue700-tag":{"id":1763648373069,"text":"$state","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸ºåŸºç¡€ï¼Œäºæ˜¯å¯ä»¥é¡ºåˆ©çš„å®ç° "},{"insert":{"blue700-tag":{"id":1763648378370,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å’Œ "},{"insert":{"blue700-tag":{"id":1763648380568,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":"ã€‚è¿™æ¬¡æˆ‘ä»¬å°±æ¥åœ¨Reactä¸­å®ç° "},{"insert":{"blue700-tag":{"id":1763648394468,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":"ã€‚å¦‚æœä½ å·²ç»çœ‹è¿‡äº†ä¹‹å‰çš„ä¸¤ç¯‡æ–‡ç« ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„å†…å®¹ä½ ç†è§£èµ·æ¥å°†ä¼šæ‘§æ¯æ‹‰æœ½èˆ¬é¡ºç•…ã€‚\n\napi-$derivedè®¾è®¡"},{"attributes":{"header":2},"insert":"\n"},{"insert":"å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬è¿˜æ˜¯å…ˆæ¥çœ‹çœ‹åœ¨ "},{"attributes":{"bold":true},"insert":"Svelte"},{"insert":" ä¸­ "},{"insert":{"blue700-tag":{"id":1763648406867,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" æ˜¯å¦‚ä½•ä½¿ç”¨çš„ï¼š\n<script>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\tlet count = $state({ value: 0 });"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\tlet doubled = $derived(count * 2);"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"    $effect(() => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        console.log(doubled)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    })"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"<button onclick={() => count.value++}>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\t{doubled}"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</button>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"<p>{count} doubled is {doubled}</p>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"æˆ–è€…ï¼š\n<script>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\tlet count = $state({ value: 0 });"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\tlet doubled = $derived.by(() => count * 2);"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    $effect(() => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        console.log(doubled)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    })"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</script>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"<button onclick={() => count.value++}>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\t{doubled}"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</button>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"<p>{count} doubled is {doubled}</p>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"å¯ä»¥çœ‹è§åœ¨ "},{"attributes":{"bold":true},"insert":"Svelte"},{"insert":" ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°å‡ ä¸ªç‰¹ç‚¹ï¼š\n"},{"insert":{"listItemContainer":"<div class=\"list-item-container\" id=\"your-custom-id-123\"><div class=\"line-container\"><span class=\"list-index\">1. </span><span class=\"list-content\">$derived å¯å°†è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œè¡¨è¾¾å¼è®¿é—®çš„å“åº”å¼å˜é‡æ›´æ–°åˆ™å†æ‰§è¡Œè¡¨è¾¾å¼</span></div><div class=\"line-container\"><span class=\"list-index\">2. </span><span class=\"list-content\">$derived æä¾›äº†byæ–¹æ³•æ‰§è¡Œè®¡ç®—å‡½æ•°ï¼Œå…¶ä¸­è®¿é—®çš„å“åº”å¼å˜é‡æ›´æ–°åˆ™é‡æ‰§è¡Œå‡½æ•°</span></div><div class=\"line-container\"><span class=\"list-index\">3. </span><span class=\"list-content\">$derived è¿”å›çš„å“åº”å¼å˜é‡å¯è¢«$effectè¿½è¸ªï¼Œå€¼å˜åŒ–åˆ™é‡æ–°æ‰§è¡Œæ³¨å†Œçš„å‡½æ•°</span></div></div>"}},{"insert":"\nèƒ½å®ç°åˆ°ä»€ä¹ˆç¨‹åº¦"},{"attributes":{"header":2},"insert":"\n"},{"insert":"é‚£ä¹ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹ï¼Œå¦‚æœåœ¨ React ä¸­å®ç°è¿™ä¸ª "},{"insert":{"blue700-tag":{"id":1763648617181,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" èƒ½å®ç°åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿ\n\né¦–å…ˆï¼Œ"},{"insert":{"blue700-tag":{"id":1763648660447,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å¯ä»¥ç›´æ¥å°†è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ï¼Œæ˜¯é€šè¿‡ç¼–è¯‘æ—¶å°†ä»£ç åšäº†æ›¿æ¢ï¼Œæ¯”å¦‚å¯ä»¥å°†è¡¨è¾¾å¼ç”¨å‡½æ•°åŒ…è£¹ï¼Œæˆ–è€…å°†æ•´ä¸ªâ€œ"},{"attributes":{"bold":true},"insert":"doubled = $derived(count * 2)"},{"insert":"â€åœ¨ç¼–è¯‘æ—¶æ›¿æ¢æˆ:\n"},{"attributes":{"bold":true},"insert":"function update_total() { total = count * 2 }"},{"insert":" è¿™ç§å½¢å¼\n\nä»…åœ¨é€»è¾‘ä»£ç å±‚é¢ï¼Œä¸ç»è¿‡ç¼–è¯‘ï¼Œæˆ‘ä»¬å®ç°çš„ "},{"insert":{"blue700-tag":{"id":1763648699145,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" åªèƒ½å°†å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¹¶éœ€è¦è¿”å›ä¸€ä¸ª"},{"attributes":{"bold":true},"insert":"ä»£ç†"},{"insert":"ï¼Œå½“è¿™ä¸ª"},{"attributes":{"bold":true},"insert":"ä»£ç†"},{"insert":"åœ¨ "},{"insert":{"blue700-tag":{"id":1763648718378,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸­è¢«è®¿é—®æ—¶ï¼Œä¼šåŒå‘è®°å½•ä¾èµ–è®¢é˜…å…³ç³»ï¼Œç„¶åè¿™ä¸ª"},{"attributes":{"bold":true},"insert":"ä»£ç†"},{"insert":"ä¸­çš„å€¼æ›´æ–°æ—¶é€šçŸ¥è¿™ä¸ª "},{"attributes":{"bold":true},"insert":"effect"},{"insert":" æ‰§è¡Œã€‚\n\n"},{"insert":{"blue700-tag":{"id":1763648738212,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" åœ¨ "},{"attributes":{"bold":true},"insert":"Svelte"},{"insert":" ä¸­æœ‰ä¸€ä¸ªé™åˆ¶æ˜¯ï¼Œä¸å…è®¸åœ¨è¡¨è¾¾å¼æˆ–å‡½æ•°ä¸­æ›´æ–°å“åº”å¼å˜é‡ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æƒ³è±¡å‡ºæˆ‘ä»¬å®ç°çš„ "},{"insert":{"blue700-tag":{"id":1763648840992,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å°†ä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼š\nlet count = $state({ value: 0 });"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"let doubled = $derived(() => count * 2); // return a Proxy"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"$effect(() => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    console.log(doubled.value) // get the prop \"value\" of Proxy"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"})"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"return <div>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    <button onclick={() => count.value++}>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        {doubled}"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    </button>"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"    <p>{count} doubled is {doubled}</p>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"</div>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"\napi-$derivedå®ç°åˆ†æ"},{"attributes":{"header":2},"insert":"\n"},{"insert":"å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬å¼€å§‹åˆ†æï¼Œå¦‚ä½•å®ç°è¿™ä¸ªæˆ‘ä»¬æƒ³è±¡ä¸­çš„ "},{"insert":{"blue700-tag":{"id":1763648846458,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":"ã€‚ç›¸æ¯”äº "},{"insert":{"blue700-tag":{"id":1763648850559,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":"ï¼Œ"},{"insert":{"blue700-tag":{"id":1763648854475,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" åŒå‘å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»æ—¶æœ‰æ‰€ä¸åŒï¼š\n\nå½“ "},{"insert":{"blue700-tag":{"id":1763648863157,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" æ³¨å†Œçš„è®¡ç®—å‡½æ•°è®¿é—®å“åº”å¼å˜é‡æ—¶ï¼Œéœ€è¦ä¸è¿™äº›å˜é‡åŒå‘å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ï¼›åŒæ—¶ï¼Œå¦‚æœ "},{"insert":{"blue700-tag":{"id":1763648870974,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" è¿”å›çš„å€¼ï¼ˆProxyï¼‰åœ¨ "},{"insert":{"blue700-tag":{"id":1763648876008,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" æ³¨å†Œçš„å‡½æ•°ä¸­è¢«è®¿é—®æ—¶ï¼Œä¹Ÿè¦ä¸è¿™ä¸ª "},{"attributes":{"bold":true},"insert":"effect"},{"insert":" åŒå‘å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ã€‚\n\næœ€åçš„æ•ˆæœä¹Ÿä¸ "},{"insert":{"blue700-tag":{"id":1763648887928,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" æœ‰æ‰€ä¸åŒï¼šå»ºç«‹å®Œæ•´çš„ä¾èµ–è®¢é˜…å…³ç³»åï¼Œ"},{"insert":{"blue700-tag":{"id":1763648893124,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" çš„ä¾èµ–å‘ç”Ÿå˜åŒ–ï¼Œ"},{"insert":{"blue700-tag":{"id":1763648897974,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å…¶å®ä¸ä¼šç«‹å³é‡æ–°æ‰§è¡Œï¼Œè€Œæ˜¯å°†è‡ªèº«çš„ä¸€ä¸ªâ€œ"},{"insert":{"blue700-tag":{"id":1763648905124,"text":"dirty","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":"â€æ ‡å¿—è®¾ç½®ä¸º "},{"attributes":{"bold":true},"insert":"ture"},{"insert":"ï¼Œå®ƒè¡¨ç¤ºå½“ "},{"insert":{"blue700-tag":{"id":1763648915639,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸‹æ¬¡è®¿é—®æ—¶é‡æ–°æ‰§è¡Œè®¡ç®—å‡½æ•°ï¼Œè¿™æ˜¯ä¸€ä¸ªâ€œ"},{"attributes":{"bold":true},"insert":"å»¶è¿Ÿæ‰§è¡Œ"},{"insert":"â€çš„ä¼˜åŒ–ã€‚\n\nè¯´çš„æŠ½è±¡ç‚¹ï¼Œè¿™ä¸ªå“åº”å¼ç³»ç»Ÿï¼Œæ—¢æœ‰â€œ"},{"attributes":{"bold":true},"insert":"æ¨"},{"insert":"â€ä¹Ÿæœ‰â€œ"},{"attributes":{"bold":true},"insert":"æ‹‰"},{"insert":"â€ï¼Œâ€œ"},{"attributes":{"bold":true},"insert":"æ¨"},{"insert":"â€å°±æ˜¯å½“ä¾èµ–æ›´æ–°æ—¶å‘Šè¯‰è®¢é˜…è€…æ–°å€¼ï¼Œâ€œ"},{"attributes":{"bold":true},"insert":"æ‹‰"},{"insert":"â€ä¾¿æ˜¯å‘Šè¯‰è®¢é˜…è€…å½“å‰å·²ç»æ”¹å˜ï¼Œä½†è®¢é˜…è€…å½“å‰å¹¶ä¸ç«‹å³æ”¹å˜æˆ–æ‰§è¡Œï¼Œè€Œæ˜¯ä¸‹æ¬¡è‡ªå·±ä¸»åŠ¨è·å–æ–°å€¼ã€‚\n\nå¦ä¸€ä¸ "},{"insert":{"blue700-tag":{"id":1763648954089,"text":"$state","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸åŒçš„åœ°æ–¹åœ¨ä¸ï¼Œå®ƒä½œä¸ºæä¾›å€¼çš„å¯¹è±¡ï¼Œåœ¨ä¸ "},{"attributes":{"bold":true},"insert":"effect"},{"insert":" åŒå‘å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»æ—¶ï¼Œä¸å†éœ€è¦åƒ "},{"insert":{"blue700-tag":{"id":1763648964971,"text":"$state","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" é‚£ä¹ˆå¯¹ä¾èµ–åµŒå¥—é€çº§é€ä¸ª "},{"attributes":{"bold":true},"insert":"prop"},{"insert":" å»ºç«‹å…³ç³»ï¼Œä»…éœ€å¯¹è‡ªå·±è¿™ä¸€å±‚å»ºç«‹å³å¯ã€‚\n\næœ€åä¸ "},{"insert":{"blue700-tag":{"id":1763648977372,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ç›¸åŒçš„åœ°æ–¹æ˜¯ï¼Œå®ƒä¹Ÿéœ€è¦åœ¨æ‰§è¡Œæ—¶å°†è‡ªå·±çš„å¼•ç”¨è®¾ç½®åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåœ¨è¿™æœŸé—´è®¿é—®çš„å“åº”å¼å˜é‡å°†ä¸å®ƒå»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ï¼Œç„¶åå°†è‡ªå·±ä»è¿™ä¸ªå…¨å±€å˜é‡ç§»é™¤ã€‚\n\næ‰€ä»¥ï¼Œ"},{"insert":{"blue700-tag":{"id":1763648986255,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å³ä¸ "},{"insert":{"blue700-tag":{"id":1763648990722,"text":"$state","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸€æ ·æ˜¯ä¸€ä¸ªæä¾›å€¼çš„å¯¹è±¡ï¼Œå¹¶ä¸ "},{"insert":{"blue700-tag":{"id":1763648996187,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ï¼›ä¹Ÿä¸ "},{"insert":{"blue700-tag":{"id":1763649004371,"text":"$effect","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" ä¸€æ ·ï¼Œéœ€è¦ä¸å“åº”å¼å˜é‡å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ï¼›åŒæ—¶åˆæœ‰ç€è‡ªå·±çš„ä¸åŒçš„ç‚¹ã€‚\n\né‚£ä¹ˆæˆ‘ä»¬å°±æ¥æ€»ç»“ä¸€ä¸‹ "},{"insert":{"blue700-tag":{"id":1763649011738,"text":"$derived","renderAsBlock":false,"className":"blue700-tag"}}},{"insert":" çš„å…·ä½“æ‰§è¡Œæµç¨‹ï¼š\n"},{"insert":{"listItemContainer":"<div class=\"list-item-container\" id=\"your-custom-id-123\"><div class=\"line-container\"><span class=\"list-index\">1. </span><span class=\"list-content\"><span-blue700-tag data-id=\"1763649016338\" data-text=\"$derived\" data-class=\"blue700-tag\" class=\"blue700-tag\">ï»¿<span contenteditable=\"false\">$derived</span>ï»¿</span-blue700-tag> æ‰§è¡Œï¼Œè®¾ç½®å…¨å±€å˜é‡</span></div><div class=\"line-container\"><span class=\"list-index\">2. </span><span class=\"list-content\">æ¸…ç†åŒæ–¹çš„ä¾èµ–è®¢é˜…å…³ç³»</span></div><div class=\"line-container\"><span class=\"list-index\">3. </span><span class=\"list-content\">ç«‹å³æ‰§è¡Œä¸€æ¬¡æ³¨å†Œçš„è®¡ç®—å‡½æ•°</span></div><div class=\"line-container\"><span class=\"list-index\">4. </span><span class=\"list-content\">æ‰§è¡Œæ³¨å†Œå‡½æ•°ï¼Œåœ¨æ¯æ¬¡æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œé¦–æ¬¡æˆ–é‡æ–°å»ºç«‹åŒæ–¹çš„ä¾èµ–è®¢é˜…å…³ç³»</span></div><div class=\"line-container\"><span class=\"list-index\">5. </span><span class=\"list-content\">ç§»é™¤å…¨å±€å˜é‡ä¸­è®¾ç½®çš„å€¼</span></div><div class=\"line-container\"><span class=\"list-index\">6. </span><span class=\"list-content\">ä¾èµ–å€¼å˜åŒ–æ—¶è®¾ç½®çŠ¶æ€â€œdirtyâ€ä¸ºtrueï¼Œä½†ä¸æ‰§è¡Œè®¡ç®—å‡½æ•°åŒæ—¶é€šçŸ¥è®¢é˜…è€…</span></div></div>"}},{"insert":"\nå®ç°$derived"},{"attributes":{"header":2},"insert":"\n"},{"insert":"æœ‰äº†ä»¥ä¸Šçš„é€»è¾‘ï¼Œå’±ä»¬å°±å¯ä»¥å¼€å§‹æŒ‰ç ç´¢éª¥äº†ï¼š\n// ./your-path/$deriver.ts"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"import { getCurrentRunner, pushRunner, popRunnerExpect, RunnerType } from \"./your-path/$effect\""},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"export type RecomputeRunnerType = {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    (): DerivedFnResultType;"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    __run: Function;"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    deps: Set<RecomputeRunnerDepsType>;"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"type DerivedFnResultType = any"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"type DerivedFntType = () => DerivedFnResultType"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"type RecomputeRunnerDepsType = {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    _subs: Set<RunnerType | RecomputeRunnerType>"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"// notify all react subscribers (effect derived etc.)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"function notifyReactSubRun(reactSubs?: Set<RunnerType | RecomputeRunnerType>) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    reactSubs?.forEach(reactSub => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      reactSub.__run()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  });"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"export function $derived(fn: DerivedFntType) {"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"    let cached: DerivedFnResultType"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    let dirty = true"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    const subs = new Set<RunnerType | RecomputeRunnerType>()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"  "},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    function recomputeRunner() {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        // clear deps"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        recomputeRunner._cleanupDependencies()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        pushRunner(recomputeRunner)"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"        try {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            cached = fn() // rebuild dependencies"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        } finally {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            popRunnerExpect(recomputeRunner)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            dirty = false"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"    recomputeRunner.deps = new Set<RecomputeRunnerDepsType>()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    recomputeRunner.__run = () => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        dirty = true"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        notifyReactSubRun(subs)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    recomputeRunner._cleanupDependencies = () => {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        if (recomputeRunner.deps) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            for (const sig of recomputeRunner.deps) sig._subs.delete(recomputeRunner)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        recomputeRunner.deps.clear()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"    return {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      get value() {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        const current = getCurrentRunner()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        if (current) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            subs.add(current)"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            current.deps.add({"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"                _subs: subs"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            })"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        }"},{"attributes":{"code-block":"javascript"},"insert":"\n\n"},{"insert":"        if (dirty) {"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"            recomputeRunner()"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"        return cached"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"      }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"    }"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"}"},{"attributes":{"code-block":"javascript"},"insert":"\n"},{"insert":"è¿™æ¬¡æˆ‘ä»¬ä¸ç”¨å®ç°ä¸€ä¸ª"},{"attributes":{"bold":true},"insert":"React Hook"},{"insert":"ï¼Œè€Œæ˜¯ä¸€ä¸ªæ¯æ¬¡æ‰§è¡Œéƒ½è¿”å›ç¼“å­˜å€¼æˆ–è€…è®¡ç®—æ–°å€¼çš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªæœ‰èµ‹å€¼æ‹¦æˆªçš„å¯¹è±¡ï¼Œæ¯æ¬¡èµ‹å€¼æ—¶éƒ½å…ˆæ£€æŸ¥è‡ªèº«æ˜¯å¦å·²ç»å¤„åœ¨ä¸€ä¸ª "},{"attributes":{"bold":true},"insert":"effect"},{"insert":" æˆ–è€… "},{"attributes":{"bold":true},"insert":"derived"},{"insert":" çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œå¦‚æœæ˜¯åˆ™å»ºç«‹åŒå‘çš„ä¾èµ–è®¢é˜…å…³ç³»ã€‚\n\nå¦‚æœè®¿é—®æ‹¦æˆªæ—¶ï¼Œå½“å‰è‡ªèº« "},{"attributes":{"bold":true},"insert":"dirty"},{"insert":" æ ‡å¿—ä¸º "},{"attributes":{"bold":true},"insert":"true"},{"insert":"ï¼Œåˆ™ç«‹å³æ‰§è¡Œè®¡ç®—å‡½æ•°è·å–æ–°å€¼å¹¶ç¼“å­˜èµ·æ¥ï¼Œç„¶åè¿”å›æ–°å€¼ã€‚\n\n"},{"attributes":{"bold":true},"insert":"RecomputeRunner"},{"insert":" å‡½æ•°åˆ™æ˜¯ç›´è§‚å¤ç°æ‰§è¡Œæµç¨‹ä¸­çš„ï¼šå°†è‡ªèº«å¼•ç”¨åœ¨å…¨å±€å˜é‡é‡Œå…¥æ ˆï¼›æ¸…ç†åŒæ–¹å…³ç³»ï¼Œæ‰§è¡Œè®¡ç®—å‡½æ•°ï¼Œå¹¶åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é€šè¿‡è®¿é—®å“åº”å¼å˜é‡ï¼Œè§¦å‘è®¿é—®æ‹¦æˆªæ¥å»ºç«‹åŒå‘ä¾èµ–è®¢é˜…å…³ç³»ï¼›æ¥ç€æ˜¯é€šçŸ¥è®¢é˜…è€…ã€è®¾ç½®è‡ªèº« "},{"attributes":{"bold":true},"insert":"dirty"},{"insert":" æ ‡å¿—ä¸º "},{"attributes":{"bold":true},"insert":"false"},{"insert":"ï¼›å‡ºæ ˆå°†è‡ªèº«ä»å…¨å±€å˜é‡ç§»é™¤ï¼›\n\nå…¶æä¾›çš„ "},{"attributes":{"bold":true},"insert":"deps"},{"insert":" ä¸ "},{"attributes":{"bold":true},"insert":"__run"},{"insert":" å‡½æ•°ä¸"},{"attributes":{"link":"https://blog.hiou.top/dollar-effect"},"insert":"ã€ŠSvelteçš„$effectåœ¨Reactä¸­çš„åŸºç¡€å®ç°ã€‹"},{"insert":"çš„ä¸€æ ·ï¼Œæ˜¯æä¾›ç»™å“åº”å¼å˜é‡åœ¨è§¦å‘è®¿é—®èµ‹å€¼æ‹¦æˆªæ—¶è°ƒç”¨çš„ï¼Œç”¨æ¥å»ºç«‹ä¾èµ–è®¢é˜…å…³ç³»ä¸æ›´æ–°çš„é€šçŸ¥ã€‚\n\næœ€å"},{"attributes":{"header":2},"insert":"\n"},{"insert":"å¥½çš„ï¼Œåˆ°äº†è¿™é‡Œï¼Œæˆ‘ä»¬å·²ç»åˆ†æå¹¶ç†æ¸…äº† "},{"attributes":{"bold":true},"insert":"Svelte"},{"insert":" æ–°ç‰ˆä¸­å‡ ä¸ªæ ¸å¿ƒå¸¸ç”¨ apiï¼ŒåŒæ—¶æ ¹æ® "},{"attributes":{"bold":true},"insert":"React"},{"insert":" çš„ç‰¹ç‚¹è¿›è¡Œé€‚é…ï¼Œå°†å…¶å¼•å…¥åˆ°äº†"},{"attributes":{"bold":true},"insert":"React"},{"insert":" çš„ä¸–ç•Œä¸­æ¥ï¼Œç›¸ä¿¡ä½ å·²ç»æ”¶è·ä¸°ç››äº†ğŸ‘ï¼\n\næœ€åï¼Œæˆ‘æƒ³å¯¹å¤§å®¶è¯´ï¼Œæœ€è¿‘è¿™æ®µæ—¶é—´AIå¤§æ¨¡å‹åˆå¼€å§‹äº‰ç›¸å‘å¸ƒåˆ·æ–°æ¦œä¸€äº†ï¼Œåœ¨è¿™ä¸ªAIè¶Šæ¥è¶Šå¼ºå¤§çš„å¹´ä»£ï¼Œæˆ‘ä»¬ä¸èƒ½æ”¾å¼ƒæ€è€ƒï¼Œè€Œæ˜¯éœ€è¦åœ¨è¿æ¥AIçš„æƒ…å†µä¸‹ä¸æ–­ä¸°å¯Œè‡ªèº«ï¼Œå°±åƒå±±å§†å¥¥ç‰¹æ›¼è¯´çš„ï¼Œæˆ‘ä»¬éœ€è¦ä¿æŒå¯¹è¿™ä¸ªä¸–ç•Œçš„å¥½å¥‡ï¼Œå­¦ä¹ å¦‚ä½•å­¦ä¹ ã€‚äººç±»å¤©ç”Ÿå°±èƒ½åˆ›é€ å’ŒæŒæ¡å·¥å…·ï¼Œå¹¶ä»¥æ­¤è¶…è¶Šå…¶å®ƒç‰©ç§åŒæ—¶ä¹Ÿè¶…è¶Šå…¶ä»–äººã€‚å¦‚æœä½ å½“ä¸‹è¿·èŒ«ï¼Œæ²¡æœ‰å…³ç³»ï¼Œè¿™å¾ˆæ­£å¸¸ï¼Œæ‰€æœ‰äººéƒ½å¦‚æ­¤ï¼Œè¯·åšæŒå­¦ä¹ å¹¶ä¸AI æ¥è§¦ï¼Œåœ¨è¿™ä¸ªAIä»åœ¨å¿«é€Ÿå‘å±•çš„é˜¶æ®µï¼Œæ²¡æœ‰ä¸€ä¸ªæˆ‘ä»¬è¯¥å¤„åœ¨ä½•ç§ä½ç½®çš„ç¡®å®šç­”æ¡ˆï¼Œè€Œæ€è€ƒæˆ‘ä»¬èƒ½åšä»€ä¹ˆï¼Œèƒ½ä¸AIåšä»€ä¹ˆå¹¶ä¸”å»ä»˜ä¹‹å®è·µæ‰æ˜¯æˆ‘ä»¬è¿™åœ¨ä¸ªè¿‡ç¨‹ä¸­è¯¥æŒç»­åšçš„äº‹ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»ï¼Œç¥å¤§å®¶æ¥ä¸‹æ¥çš„è·¯çš†æ˜¯å¦é€”ğŸ˜„ã€‚\n"}]}

const safeHtml = getSafeHtmlFromDelta(TestDeltaString)

const result = {
    content: safeHtml,
}

export default result;

